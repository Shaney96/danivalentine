<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#ff3b7a"/>
  <title>For Dani üíò</title>

  <style>
    :root{
      --bg1:#ffe6f0;
      --bg2:#ffffff;
      --card:rgba(255,255,255,.84);
      --text:#0f0f12;
      --muted:rgba(15,15,18,.72);
      --line:rgba(255,59,122,.18);
      --pink:#ff3b7a;
      --pink2:#ff6aa0;
      --shadow: 0 22px 70px rgba(0,0,0,.14);
      --radius: 28px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(900px 450px at 20% 10%, rgba(255,59,122,.20), transparent 55%),
        radial-gradient(900px 450px at 80% 20%, rgba(255,106,160,.18), transparent 60%),
        radial-gradient(900px 450px at 50% 100%, rgba(255,59,122,.10), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }
    .wrap{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px 18px;
      position:relative;
    }

    /* Soft floating blobs */
    .blob{
      position:absolute;
      filter: blur(30px);
      opacity:.35;
      pointer-events:none;
      mix-blend-mode:multiply;
      animation: blobFloat 10s ease-in-out infinite;
    }
    .blob.b1{width:260px;height:260px;left:-50px;top:40px;background:#ff3b7a;border-radius:44% 56% 53% 47%/46% 49% 51% 54%;}
    .blob.b2{width:320px;height:320px;right:-90px;top:120px;background:#ff9cc3;border-radius:55% 45% 62% 38%/44% 60% 40% 56%; animation-duration:12s;}
    .blob.b3{width:280px;height:280px;left:40%;bottom:-130px;background:#ffd1e3;border-radius:60% 40% 45% 55%/50% 45% 55% 50%; animation-duration:14s;}
    @keyframes blobFloat{
      0%,100%{transform:translateY(0) translateX(0) scale(1)}
      50%{transform:translateY(18px) translateX(10px) scale(1.03)}
    }

    .card{
      width:min(900px, 94vw);
      background:var(--card);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.55);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 22px;
      position:relative;
      overflow:hidden;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:14px;
      flex-wrap:wrap;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,59,122,.15), rgba(255,59,122,.08));
      border:1px solid var(--line);
      font-weight:950;
      font-size:13px;
      letter-spacing:.2px;
      color: rgba(194,24,91,.95);
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(15,15,18,.10);
      background: rgba(255,255,255,.70);
      color: rgba(15,15,18,.84);
      font-weight:900;
      font-size:13px;
    }

    .toggle{
      display:inline-flex;
      border:1px solid rgba(15,15,18,.12);
      border-radius:999px;
      overflow:hidden;
      background: rgba(255,255,255,.70);
    }
    .toggle button{
      border:0;
      background:transparent;
      padding:8px 10px;
      font-weight:1000;
      cursor:pointer;
      font-size:13px;
      color: rgba(15,15,18,.70);
    }
    .toggle button.active{
      background: rgba(255,59,122,.12);
      color: rgba(194,24,91,.95);
    }

    .hero{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:18px;
      align-items:stretch;
    }
    @media (max-width:820px){
      .hero{grid-template-columns:1fr}
    }

    .panel{
      background: rgba(255,255,255,.78);
      border:1px solid rgba(15,15,18,.08);
      border-radius: 22px;
      padding: 18px;
      position:relative;
    }

    .photoWrap{
      display:flex;
      gap:14px;
      align-items:center;
      margin-bottom: 10px;
    }
    .avatar{
      width:76px;
      height:76px;
      border-radius: 22px;
      overflow:hidden;
      border:1px solid rgba(15,15,18,.10);
      background: linear-gradient(135deg, rgba(255,59,122,.18), rgba(255,106,160,.12));
      box-shadow: 0 14px 35px rgba(0,0,0,.10);
      flex: 0 0 auto;
    }
    .avatar img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .photoText .small{
      margin:0;
      font-weight:950;
      font-size:12px;
      color: rgba(15,15,18,.60);
      letter-spacing:.25px;
      text-transform: uppercase;
    }
    .photoText .big{
      margin:2px 0 0;
      font-weight:1000;
      letter-spacing:-.3px;
    }

    h1{
      margin: 6px 0 10px;
      font-size: clamp(26px, 3.1vw, 40px);
      letter-spacing: -.8px;
      line-height: 1.04;
    }
    .sub{
      margin:0 0 14px;
      color:var(--muted);
      font-size: 15px;
      line-height:1.4;
    }

    .nameRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin: 12px 0 6px;
    }
    .field{
      flex:1;
      min-width: 210px;
      display:flex;
      flex-direction:column;
      gap:6px;
      text-align:left;
    }
    label{
      font-size:12px;
      font-weight:950;
      color: rgba(15,15,18,.62);
      letter-spacing:.2px;
    }
    input{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(15,15,18,.12);
      background: rgba(255,255,255,.88);
      outline:none;
      font-weight:850;
      color: rgba(15,15,18,.90);
    }
    input:focus{border-color: rgba(255,59,122,.35); box-shadow: 0 0 0 4px rgba(255,59,122,.10);}

    .actions{
      margin-top: 12px;
      position:relative;
      height:58px;
    }
    .btn{
      border:0;
      cursor:pointer;
      border-radius:999px;
      padding: 12px 16px;
      font-weight:1000;
      font-size:15px;
      user-select:none;
      transition: transform .08s ease, box-shadow .2s ease, opacity .2s ease;
      display:inline-flex;
      align-items:center;
      gap:10px;
      white-space:nowrap;
    }
    .btn:active{transform:scale(.985)}
    .btn.primary{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#fff;
      box-shadow: 0 14px 36px rgba(255,59,122,.28);
    }
    .btn.primary:hover{box-shadow: 0 16px 42px rgba(255,59,122,.34)}
    .btn.ghost{
      background: rgba(255,255,255,.82);
      border:1px solid rgba(15,15,18,.12);
      color: rgba(15,15,18,.85);
    }
    #noBtn{
      position:absolute;
      right: 0;
      top: 0;
      opacity: .98;
    }

    .divider{
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(255,59,122,.24), transparent);
      margin: 16px 0;
    }

    .reveal{
      margin-top: 12px;
      display:none;
      animation: popIn .35s ease both;
    }
    @keyframes popIn{
      from{opacity:0; transform: translateY(8px) scale(.99)}
      to{opacity:1; transform: translateY(0) scale(1)}
    }

    .grid2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
    }
    @media (max-width:820px){
      .grid2{grid-template-columns:1fr}
    }

    .cardMini{
      background: rgba(255,255,255,.84);
      border:1px solid rgba(15,15,18,.08);
      border-radius: 20px;
      padding: 14px;
    }

    .miniTitle{
      margin:0 0 8px;
      font-weight:1000;
      letter-spacing:-.2px;
      font-size:15px;
    }
    .miniText{
      margin:0 0 10px;
      color: var(--muted);
      line-height:1.4;
      font-size: 14px;
    }

    .foodRow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top: 10px;
    }
    .food{
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(15,15,18,.92);
      color:#fff;
      font-weight:950;
      font-size: 13.5px;
      border:1px solid rgba(255,255,255,.10);
      transition: transform .1s ease, opacity .2s ease;
    }
    .food:hover{opacity:.92}
    .food:active{transform:scale(.985)}
    .food.selected{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      border-color: rgba(255,255,255,.25);
    }

    .copyRow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top: 10px;
    }

    .spotifyFrame{
      width:100%;
      height:152px;
      border:0;
      border-radius:18px;
      overflow:hidden;
      background: rgba(15,15,18,.06);
    }

    /* Floating hearts */
    .heart{
      position:absolute;
      font-size:16px;
      opacity:.75;
      pointer-events:none;
      animation: floatUp linear forwards;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) scale(1); opacity:.95; }
      to{ transform: translateY(-160px) scale(1.25); opacity:0; }
    }

    /* Confetti */
    .confetti{
      position:absolute;
      width:8px;
      height:12px;
      opacity:.9;
      top:-20px;
      animation: confFall linear forwards;
      border-radius:3px;
      pointer-events:none;
    }
    @keyframes confFall{
      to{ transform: translateY(820px) rotate(420deg); opacity:1; }
    }

    .tiny{
      font-size:12px;
      color: rgba(15,15,18,.58);
      margin-top: 10px;
      line-height:1.35;
    }

    @media (prefers-reduced-motion: reduce){
      .blob{animation:none}
      .reveal{animation:none}
      .heart,.confetti{display:none}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>

    <main class="card" id="card" role="main" aria-label="Friend Valentine invitation">
      <div class="topbar">
        <div class="pill" id="pill">For Dani üíò</div>

        <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end;">
          <div class="chip" id="chip">‚ú® friend valentine invite</div>
          <div class="toggle" aria-label="language toggle">
            <button id="enBtn" class="active" type="button">EN</button>
            <button id="esBtn" type="button">ES</button>
          </div>
        </div>
      </div>

      <section class="hero">
        <!-- LEFT -->
        <div class="panel">
          <div class="photoWrap">
            <div class="avatar">
              <!-- OPTIONAL: replace PHOTO_URL_HERE with your photo file/link. If blank, it will hide automatically. -->
              <img id="photo" alt="Photo" src="PHOTO_URL_HERE" onerror="this.style.display='none'">
            </div>
            <div class="photoText">
              <p class="small" id="taglineSmall">Valentine‚Äôs (friend edition)</p>
              <p class="big" id="taglineBig">A tiny website‚Ä¶ to ask a very serious question üòÑ</p>
            </div>
          </div>

          <h1 id="title">Will you be my ‚ÄúFriend Valentine‚Äù? üíòü§ù</h1>
          <p class="sub" id="subtitle">
            No pressure. Just vibes. And possibly food.
          </p>

          <div class="nameRow">
            <div class="field">
              <label id="lblFrom" for="fromName">From</label>
              <input id="fromName" type="text" placeholder="Your name" value="Shane">
            </div>
            <div class="field">
              <label id="lblTo" for="toName">To</label>
              <input id="toName" type="text" placeholder="Their name" value="Dani">
            </div>
          </div>

          <div class="actions" id="actions">
            <button class="btn primary" id="yesBtn" type="button">YES ü§ùüíò</button>
            <button class="btn ghost" id="noBtn" type="button" aria-label="No">NO üò§</button>
          </div>

          <div class="divider"></div>

          <div class="reveal" id="reveal">
            <div class="grid2">
              <!-- Food (UPDATED OPTIONS) -->
              <div class="cardMini">
                <div class="miniTitle" id="foodTitle">Important follow-up question üçΩÔ∏è</div>
                <p class="miniText" id="foodText">
                  Cool. Now‚Ä¶ what are we eating? Pick one:
                </p>

                <div class="foodRow" id="foodRow">
                  <a class="food" href="#"
                     data-choice-en="Pizza üçï"
                     data-choice-es="Pizza üçï">Pizza üçï</a>

                  <a class="food" href="#"
                     data-choice-en="Pollo a la brasa üçó"
                     data-choice-es="Pollo a la brasa üçó">Pollo a la brasa üçó</a>

                  <a class="food" href="#"
                     data-choice-en="Dessert first üç∞"
                     data-choice-es="Postre primero üç∞">Dessert first üç∞</a>

                  <a class="food" href="#"
                     data-choice-en="Food + dessert üçîüç∞"
                     data-choice-es="Comida + postre üçîüç∞">Food + dessert üçîüç∞</a>
                </div>

                <div class="tiny" id="foodHint">Pick one, then copy the message or WhatsApp it.</div>
              </div>

              <!-- Message + Spotify -->
              <div class="cardMini">
                <div class="miniTitle" id="msgTitle">Message üíå</div>
                <p class="miniText" id="msgText">Send this and I‚Äôll handle the rest.</p>

                <div class="copyRow">
                  <button class="btn ghost" id="copyBtn" type="button">Copy message</button>
                  <button class="btn primary" id="waBtn" type="button">Send on WhatsApp</button>
                </div>

                <div class="tiny" id="status"></div>

                <div class="divider" style="margin:14px 0"></div>

                <div class="miniTitle" id="songTitle">Our song üé∂</div>
                <p class="miniText" id="songText">Press play for maximum friend-valentine energy üòå</p>

                <iframe
                  class="spotifyFrame"
                  id="spotify"
                  src="https://open.spotify.com/embed/track/7MlDNspYwfqnHxORufupwq"
                  allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                  loading="lazy"
                  title="Spotify"
                ></iframe>
              </div>
            </div>
          </div>
        </div>

        <!-- RIGHT -->
        <aside class="panel">
          <div class="pill" id="vibePill">‚ú® Vibe selector</div>
          <h2 style="margin:10px 0 8px; font-size:18px; letter-spacing:-.2px;" id="vibeTitle">
            Choose the vibe and I‚Äôll match it
          </h2>
          <p class="sub" style="margin-bottom:12px" id="vibeText">
            Cute, funny, ‚Äúwe‚Äôre totally just friends‚Äù, or extra ‚ú®
          </p>

          <div class="cardMini">
            <div class="miniTitle" id="vibeMiniTitle">Quick vibes</div>
            <p class="miniText" id="vibeMiniText">Tap one to include it in the message:</p>

            <div class="foodRow" id="vibeRow">
              <a class="food" href="#" data-vibe-en="Cute ü•π" data-vibe-es="Cute ü•π">Cute ü•π</a>
              <a class="food" href="#" data-vibe-en="Funny üòÑ" data-vibe-es="Gracioso üòÑ">Funny üòÑ</a>
              <a class="food" href="#" data-vibe-en="Just friends ü§ù" data-vibe-es="Solo amigos ü§ù">Just friends ü§ù</a>
              <a class="food" href="#" data-vibe-en="Extra ‚ú®" data-vibe-es="Extra ‚ú®">Extra ‚ú®</a>
            </div>

            <div class="tiny" id="psText" style="margin-top:12px">
              PS: If you try to press ‚ÄúNO‚Äù‚Ä¶ it‚Äôs legally required to run away.
            </div>
          </div>
        </aside>
      </section>
    </main>
  </div>

  <script>
    // ---------- State ----------
    let lang = "en";
    let selectedFood = "";
    let selectedVibe = "";

    // ---------- Elements ----------
    const card = document.getElementById("card");
    const pill = document.getElementById("pill");
    const chip = document.getElementById("chip");

    const enBtn = document.getElementById("enBtn");
    const esBtn = document.getElementById("esBtn");

    const title = document.getElementById("title");
    const subtitle = document.getElementById("subtitle");
    const taglineSmall = document.getElementById("taglineSmall");
    const taglineBig = document.getElementById("taglineBig");

    const lblFrom = document.getElementById("lblFrom");
    const lblTo = document.getElementById("lblTo");

    const fromName = document.getElementById("fromName");
    const toName = document.getElementById("toName");

    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const actions = document.getElementById("actions");
    const reveal = document.getElementById("reveal");

    const foodTitle = document.getElementById("foodTitle");
    const foodText = document.getElementById("foodText");
    const foodHint = document.getElementById("foodHint");

    const msgTitle = document.getElementById("msgTitle");
    const msgText = document.getElementById("msgText");
    const copyBtn = document.getElementById("copyBtn");
    const waBtn = document.getElementById("waBtn");
    const status = document.getElementById("status");

    const songTitle = document.getElementById("songTitle");
    const songText = document.getElementById("songText");

    const vibePill = document.getElementById("vibePill");
    const vibeTitle = document.getElementById("vibeTitle");
    const vibeText = document.getElementById("vibeText");
    const vibeMiniTitle = document.getElementById("vibeMiniTitle");
    const vibeMiniText = document.getElementById("vibeMiniText");
    const psText = document.getElementById("psText");

    // ---------- Copy for both languages ----------
    const COPY = {
      en: {
        pill: (to) => `For ${to} üíò`,
        chip: "‚ú® friend valentine invite",
        taglineSmall: "Valentine‚Äôs (friend edition)",
        taglineBig: "A tiny website‚Ä¶ to ask a very serious question üòÑ",
        title: "Will you be my ‚ÄúFriend Valentine‚Äù? üíòü§ù",
        subtitle: "No pressure. Just vibes. And possibly food.",
        lblFrom: "From",
        lblTo: "To",
        yes: "YES ü§ùüíò",
        no: "NO üò§",
        foodTitle: "Important follow-up question üçΩÔ∏è",
        foodText: "Cool. Now‚Ä¶ what are we eating? Pick one:",
        foodHint: "Pick one, then copy the message or WhatsApp it.",
        msgTitle: "Message üíå",
        msgText: "Send this and I‚Äôll handle the rest.",
        copyBtn: "Copy message",
        waBtn: "Send on WhatsApp",
        needFood: "Pick a food option first üôÇ",
        copied: "Copied ‚úÖ",
        songTitle: "Our song üé∂",
        songText: "Press play for maximum friend-valentine energy üòå",
        vibePill: "‚ú® Vibe selector",
        vibeTitle: "Choose the vibe and I‚Äôll match it",
        vibeText: "Cute, funny, ‚Äúwe‚Äôre totally just friends‚Äù, or extra ‚ú®",
        vibeMiniTitle: "Quick vibes",
        vibeMiniText: "Tap one to include it in the message:",
        ps: "PS: If you try to press ‚ÄúNO‚Äù‚Ä¶ it‚Äôs legally required to run away."
      },
      es: {
        pill: (to) => `Para ${to} üíò`,
        chip: "‚ú® invitaci√≥n de ‚Äúvalent√≠n de amigos‚Äù",
        taglineSmall: "San Valent√≠n (modo amigos)",
        taglineBig: "Una mini web‚Ä¶ para hacer una pregunta MUY seria üòÑ",
        title: "¬øQuieres ser mi ‚ÄúSan Valent√≠n de Amigos‚Äù? üíòü§ù",
        subtitle: "Cero presi√≥n. Solo vibes. Y posiblemente comida.",
        lblFrom: "De",
        lblTo: "Para",
        yes: "S√ç ü§ùüíò",
        no: "NO üò§",
        foodTitle: "Pregunta important√≠sima üçΩÔ∏è",
        foodText: "Ok‚Ä¶ ahora lo crucial: ¬øqu√© comemos? Elige una:",
        foodHint: "Elige una opci√≥n y luego copia el mensaje o env√≠alo por WhatsApp.",
        msgTitle: "Mensaje üíå",
        msgText: "Env√≠alo y yo me encargo del resto.",
        copyBtn: "Copiar mensaje",
        waBtn: "Enviar por WhatsApp",
        needFood: "Primero elige una comida üôÇ",
        copied: "Copiado ‚úÖ",
        songTitle: "Nuestra canci√≥n üé∂",
        songText: "Dale play para activar el modo ‚Äúamigos‚Äù üòå",
        vibePill: "‚ú® Selector de vibe",
        vibeTitle: "Elige el vibe y yo me adapto",
        vibeText: "Cute, gracioso, ‚Äúsolo amigos‚Äù, o extra ‚ú®",
        vibeMiniTitle: "Vibes r√°pidos",
        vibeMiniText: "Toca uno para incluirlo en el mensaje:",
        ps: "PD: Si intentas presionar ‚ÄúNO‚Äù‚Ä¶ por ley tiene que escaparse."
      }
    };

    // ---------- UI update ----------
    function applyLang(){
      enBtn.classList.toggle("active", lang==="en");
      esBtn.classList.toggle("active", lang==="es");

      const to = (toName.value || "Dani").trim();
      pill.textContent = COPY[lang].pill(to);
      chip.textContent = COPY[lang].chip;

      taglineSmall.textContent = COPY[lang].taglineSmall;
      taglineBig.textContent = COPY[lang].taglineBig;

      title.textContent = COPY[lang].title;
      subtitle.textContent = COPY[lang].subtitle;

      lblFrom.textContent = COPY[lang].lblFrom;
      lblTo.textContent = COPY[lang].lblTo;

      yesBtn.textContent = COPY[lang].yes;
      noBtn.textContent = COPY[lang].no;

      foodTitle.textContent = COPY[lang].foodTitle;
      foodText.textContent = COPY[lang].foodText;
      foodHint.textContent = COPY[lang].foodHint;

      msgTitle.textContent = COPY[lang].msgTitle;
      msgText.textContent = COPY[lang].msgText;
      copyBtn.textContent = COPY[lang].copyBtn;
      waBtn.textContent = COPY[lang].waBtn;

      songTitle.textContent = COPY[lang].songTitle;
      songText.textContent = COPY[lang].songText;

      vibePill.textContent = COPY[lang].vibePill;
      vibeTitle.textContent = COPY[lang].vibeTitle;
      vibeText.textContent = COPY[lang].vibeText;
      vibeMiniTitle.textContent = COPY[lang].vibeMiniTitle;
      vibeMiniText.textContent = COPY[lang].vibeMiniText;
      psText.textContent = COPY[lang].ps;

      // Update food button labels based on language
      document.querySelectorAll("#foodRow .food").forEach(a=>{
        a.textContent = (lang==="en") ? a.getAttribute("data-choice-en") : a.getAttribute("data-choice-es");
      });

      // Update vibe button labels based on language
      document.querySelectorAll("#vibeRow .food").forEach(a=>{
        a.textContent = (lang==="en") ? a.getAttribute("data-vibe-en") : a.getAttribute("data-vibe-es");
      });

      // Refresh status
      if(selectedFood){
        status.textContent = (lang==="en") ? `Selected: ${selectedFood} ‚úÖ` : `Elegido: ${selectedFood} ‚úÖ`;
      } else if (selectedVibe){
        status.textContent = `Vibe: ${selectedVibe} ‚úÖ`;
      }
    }

    // ---------- Cute effects ----------
    function popHeart(times=1){
      for(let i=0;i<times;i++){
        const heart = document.createElement("div");
        heart.className = "heart";
        heart.textContent = Math.random()>.5 ? "üíñ" : "üíò";
        const r = card.getBoundingClientRect();
        const x = 18 + Math.random() * (r.width - 36);
        const y = r.height - 24;
        heart.style.left = x + "px";
        heart.style.top = y + "px";
        heart.style.animationDuration = (900 + Math.random()*700) + "ms";
        card.appendChild(heart);
        setTimeout(()=>heart.remove(), 1700);
      }
    }

    function confettiBurst(n=26){
      const colors = ["#ff3b7a","#ff6aa0","#ffd1e3","#111111","#ffffff"];
      const r = card.getBoundingClientRect();
      for(let i=0;i<n;i++){
        const c = document.createElement("div");
        c.className = "confetti";
        c.style.left = (Math.random() * r.width) + "px";
        c.style.background = colors[Math.floor(Math.random()*colors.length)];
        c.style.animationDuration = (950 + Math.random()*950) + "ms";
        card.appendChild(c);
        setTimeout(()=>c.remove(), 2400);
      }
    }

    // ---------- Runaway NO button ----------
    function moveNoButton(){
      const area = actions.getBoundingClientRect();
      const btn = noBtn.getBoundingClientRect();
      const pad = 6;
      const maxX = area.width - btn.width - pad;
      const maxY = area.height - btn.height - pad;

      const x = Math.max(pad, Math.floor(Math.random()*maxX));
      const y = Math.max(pad, Math.floor(Math.random()*maxY));

      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
      noBtn.style.right = "auto";
      popHeart(1);
    }

    noBtn.style.right = "0px";
    noBtn.style.top = "0px";
    noBtn.addEventListener("mouseenter", moveNoButton);
    noBtn.addEventListener("focus", moveNoButton);
    noBtn.addEventListener("touchstart", (e)=>{ e.preventDefault(); moveNoButton(); }, {passive:false});

    // ---------- Reveal on YES ----------
    yesBtn.addEventListener("click", ()=>{
      reveal.style.display = "block";
      confettiBurst(28);
      popHeart(12);

      // calm the no button after yes
      noBtn.style.opacity = 0.25;
      noBtn.style.pointerEvents = "none";
      applyLang();
    });

    // Update pill when name changes
    toName.addEventListener("input", applyLang);

    // ---------- Food selection ----------
    document.querySelectorAll("#foodRow .food").forEach(a=>{
      a.addEventListener("click", (e)=>{
        e.preventDefault();
        document.querySelectorAll("#foodRow .food").forEach(x=>x.classList.remove("selected"));
        a.classList.add("selected");
        selectedFood = (lang==="en") ? a.getAttribute("data-choice-en") : a.getAttribute("data-choice-es");
        status.textContent = (lang==="en")
          ? `Selected: ${selectedFood} ‚úÖ`
          : `Elegido: ${selectedFood} ‚úÖ`;
        popHeart(2);
      });
    });

    // ---------- Vibe selection ----------
    document.querySelectorAll("#vibeRow .food").forEach(a=>{
      a.addEventListener("click", (e)=>{
        e.preventDefault();
        document.querySelectorAll("#vibeRow .food").forEach(x=>x.classList.remove("selected"));
        a.classList.add("selected");
        selectedVibe = (lang==="en") ? a.getAttribute("data-vibe-en") : a.getAttribute("data-vibe-es");
        status.textContent = (lang==="en")
          ? `Vibe: ${selectedVibe} ‚úÖ`
          : `Vibe: ${selectedVibe} ‚úÖ`;
        popHeart(2);
      });
    });

    function buildMessage(){
      const from = (fromName.value || (lang==="en" ? "Me" : "Yo")).trim();
      const to = (toName.value || "Dani").trim();

      if(lang==="en"){
        let msg = `Hey ${to} üòÑ\nWill you be my ‚ÄúFriend Valentine‚Äù? ü§ùüíò\n\n`;
        msg += `Food plan: ${selectedFood || "your pick"}\n`;
        if(selectedVibe) msg += `Vibe: ${selectedVibe}\n`;
        msg += `\nReply with what you want and I‚Äôll sort it.\n‚Äî ${from}`;
        return msg;
      }else{
        let msg = `Hola ${to} üòÑ\n¬øQuieres ser mi ‚ÄúSan Valent√≠n de Amigos‚Äù? ü§ùüíò\n\n`;
        msg += `Comida: ${selectedFood || "t√∫ eliges"}\n`;
        if(selectedVibe) msg += `Vibe: ${selectedVibe}\n`;
        msg += `\nResp√≥ndeme qu√© quieres y lo organizo.\n‚Äî ${from}`;
        return msg;
      }
    }

    // ---------- Copy / WhatsApp ----------
    copyBtn.addEventListener("click", async ()=>{
      if(!selectedFood){
        status.textContent = COPY[lang].needFood;
        popHeart(1);
        return;
      }
      const msg = buildMessage();
      try{
        await navigator.clipboard.writeText(msg);
        status.textContent = COPY[lang].copied;
        popHeart(3);
      }catch(err){
        window.prompt(lang==="en" ? "Copy this message:" : "Copia este mensaje:", msg);
      }
    });

    waBtn.addEventListener("click", ()=>{
      if(!selectedFood){
        status.textContent = COPY[lang].needFood;
        popHeart(1);
        return;
      }
      const msg = buildMessage();
      const url = "https://wa.me/?text=" + encodeURIComponent(msg);
      window.open(url, "_blank", "noopener,noreferrer");
      popHeart(3);
    });

    // ---------- Language toggle ----------
    enBtn.addEventListener("click", ()=>{ lang="en"; applyLang(); });
    esBtn.addEventListener("click", ()=>{ lang="es"; applyLang(); });

    // Initial labels
    applyLang();
  </script>
</body>
</html>
